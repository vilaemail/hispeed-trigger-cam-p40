# HiSpeed Trigger Cam P40

Super slow motion capture app for Huawei P40.

1. `Capture` button: Single button captures a 0.5s burst at max FPS (up to 1920fps 720p) using Huawei CameraKit SDK. Saves to `DCIM/hispeed-trigger-cam/YYYY-MM-DD-HH-MM-SS-SSS_FFFfps.mp4`.
2. `Arm` button: Arms for capturing and waits for key `r` from HID (i.e. USBC connected keyboard). On the keypress does the same as `Capture` button.
3. Can toggle between 960 FPS and 1920 FPS.
4. Opens HTTP server on either port `80` or `8080` for listing captures `/captures` and downloading a capture `/capture/filename.mp4` via HTTP GETs.

## Installing

You may either download the APK from GitHub releases or clone the repo and build your own apk per instructions below. For verifying GitHub release use the following key:

```
SHA-256: E9:55:76:8C:6A:86:6A:E7:DE:54:9A:E9:94:AA:35:73:12:6E:CC:92:67:93:04:95:08:F4:94:F8:36:78:E4:5C
```

## Disclaimer

Most of the code and project was generated by AI tools.

## Contributing

Pull requests are welcome, as long as the main app functionality keeps working and is as simple to use.

## Building the app

### Requirements

- Windows (scripts in `./scripts` folder are for Windows, you could port them to other OS, pull request welcome)
- Huawei P40 Pro (EMUI 10.0+) connected to computer with USB debugging enabled and the computer authorized.
- JDK 17+, Android SDK (API 36)

### Steps

1. After cloning, download the Huawei CameraKit SDK: `scripts\fetch-sdk.bat`
1. Build, install on device, run app and show logs in console `scripts\deploy-debug.bat`
1. Create a signed non-versioned APK `scripts\build-release.bat` and install it on device `scripts\install.bat`.
1. Release a version on github `scripts\release.bat vX.Y.Z`

## Scripts

| Script | Description |
|--------|-------------|
| `scripts\fetch-sdk.bat` | Download Huawei CameraKit SDK to `app\libs\` |
| `scripts\build-debug.bat` | Build debug APK |
| `scripts\deploy-debug.bat` | Build + install to USB device + logcat |
| `scripts\build-release.bat` | Build signed release APK to `release\` |
| `scripts\release.bat v1.0.0` | Build + sign + create GitHub release |
| `scripts\install.bat [version]` | Install APK via adb (`latest` or e.g. `v1.0.0`) |
| `scripts\logcat.bat` | View app logs |

## Signing Setup

See [signing/README.md](signing/README.md).

## License

MIT
